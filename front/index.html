<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>Restaurant System</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<link href="css/font-awesome.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
<!--web-fonts-->
<link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
<link href="http://fonts.googleapis.com/css?family=Tangerine:400,700" rel="stylesheet">
<style type="text/css">
    #search {
        outline: none;
        width: 206px;
        height: 34px;
        background: #fd6239;
        display: inline-block;
        color: #fff;
        font-size: 14px;
        border: 1px solid #fd6239;
        text-transform: uppercase;
        margin-top: 31px;
    }
    #search:hover {
        background: #26d797;
        border: 1px solid #26d797;
    }
    #recommend{
        outline: none;
        width: 206px;
        height: 34px;
        background: #fd6239;
        display: inline-block;
        color: #fff;
        font-size: 14px;
        border: 1px solid #fd6239;
        text-transform: uppercase;
        margin-top: 31px;
    }
    #recommend:hover{
        background: #26d797;
        border: 1px solid #26d797;
    }
</style>
</head>
<body>
<div class="banner" id="home">
    <!-- header -->
    <div class="banner-top">
        <div class="social-bnr-agileits">
            <a style="font-size: 1.05em;color: white;font-weight: bold;display: block;margin-top: 0.5em;">Welcome to our System!Have a good day!</a>
        </div>
        <div class="contact-bnr-w3-agile" id="right_div">
            <ul>
                <li><i class="fa fa-sign-in" aria-hidden="true"></i><a href="/signin.html">Sign in</a></li>
                <li><i class="fa fa-signing" aria-hidden="true"></i><a href="/signup.html">Sign up</a></li>
                <li>
                    <div class="search">
                        <input class="search_box" type="checkbox" id="search_box">
                        <label class="icon-search" for="search_box"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></label>
                        <div class="search_form">
                            <form action="#" method="post">
                                <input type="search" name="Search" placeholder="Search..." required="" />
                                <input type="submit" value="Send" />
                            </form>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="clearfix"></div>
    </div>
    <header>
        <div class="container">

            <!-- navigation -->
            <div class="w3_navigation">
                <nav class="navbar navbar-default">
                    <div class="navbar-header navbar-left">

                        <div class="w3_navigation_pos">
                            <h1><a href="index.html"><span>L</span>GD <span>S</span>ystem</a></h1>
                        </div>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                </nav>
            </div>
            <div class="clearfix"></div>
            <!-- //navigation -->
        </div>
    </header>
    <!-- //header -->
    <!-- banner-text -->
    <div class="banner-text" >
        <h2>SEARCH RESTAURANT FOR YOU AND YOUR TASTES!</h2>
        <div class="book-form" style="height:240px;">
            <p>Type condition you want to filter.</p>
            <form id="form">
                <div class="col-md-3 form-date-w3-agileits" style="width:680px;float: left">
                    <label><i class="fa fa-info" aria-hidden="true"></i>Condition :</label>
                    <input  id="businesspicker1"  name="Text" type="text" value=""  required="">
                </div>
                <div class="col-md-3 form-left-agileits-submit" style="float: right">
                    <input id="search" onclick="dosearch()" type="button" value="Search" >
                </div>
                <div class="col-md-3 form-left-agileits-submit" style="float: right">
                    <input id="recommend" onclick="dorecommend()" type="button" value="Recommend" >
                </div>
            </form>
        </div>
    </div>
    <!-- gallery -->
    <div class="gallery-ban" id="gallery">
        <div class="container">
            <ul id="flexiselDemo1">
                <li>
                    <div class="wthree_testimonials_grid_main">

                        <img src="images/p1.jpg" alt=" " class="img-responsive" />
                    </div>
                </li>
                <li>
                    <div class="wthree_testimonials_grid_main">

                        <img src="images/p2.jpg" alt=" " class="img-responsive" />
                    </div>
                </li>
                <li>
                    <div class="wthree_testimonials_grid_main">

                        <img src="images/p3.jpg" alt=" " class="img-responsive" />
                    </div>
                </li>
                <li>
                    <div class="wthree_testimonials_grid_main">

                        <img src="images/p6.jpg" alt=" " class="img-responsive" />
                    </div>
                </li>
                <li>
                    <div class="wthree_testimonials_grid_main">

                        <img src="images/p4.jpg" alt=" " class="img-responsive" />
                    </div>
                </li>
                <li>
                    <div class="wthree_testimonials_grid_main">

                        <img src="images/p5.jpg" alt=" " class="img-responsive" />
                    </div>
                </li>
            </ul>

        </div>
    </div>
    <!-- //gallery -->
</div>
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var url = decodeURI(location.search)
        var username = "";
        if(url.indexOf("username")!=-1){
            username=url.split("=")[1].split('&')[0]
            text = "<ul>\n" +
                "                <li><i class=\"fa fa-user-secret\" aria-hidden=\"true\"></i><a href=>"+username+"</a></li>\n" +
                "            </ul>"
            $("#right_div").html(text)
        }

    })
    function dosearch() {
        var search_content = $("#businesspicker1").val()
        if(search_content==''){
            $.ajax({
                dataType: "json",
                type: "GET",
                url: "http://localhost:9006/recommend/hotRestaurantList",
                async:true,
                header:"Access-Control-Allow-Origin：*",
                success: function (data) {
                    if (data) {//根据返回值进行跳转
                        result = data.restaurantList
                        window.location.href = '/restaurant_info.html?list='+result;
                    }
                    console.log(data.restaurantList);
                }, error: function (data) {
                    alert(系统错误);
                }
            });
        }else{

        }
        // console.log("123123");
    }
    function dorecommend() {
        // var search_content = $("#businesspicker1").val()
        var username = "";
        var url = decodeURI(location.search)

        if(url.indexOf("username")==-1){
            $.ajax({
                dataType: "json",
                type: "GET",
                url: "http://localhost:9006/recommend/hotRestaurantList",
                async:true,
                header:"Access-Control-Allow-Origin：*",
                success: function (data) {
                    if (data) {//根据返回值进行跳转
                        result = data.restaurantList
                        window.location.href = '/restaurant_info.html?list='+result;
                    }
                    console.log(data.restaurantList);
                }, error: function (data) {
                    alert(系统错误);
                }
            });
        }else{
            var user_id = url.split('?')[1].split('&')[1].split('=')[1]
            $.ajax({
                dataType: "json",
                type: "GET",
                url: "http://localhost:9004/recommend/userRestaurantList?user_id="+user_id,
                async:true,
                header:"Access-Control-Allow-Origin：*",
                success: function (data) {
                    if (data) {//根据返回值进行跳转
                        result = data.restaurantList
                        window.location.href = '/restaurant_info.html?username='+url.split('?')[1].split('&')[0].split('=')[1]
                            +'&list='+result;
                    }
                }, error: function (data) {
                    alert('False');
                }
            });
        }
        // console.log("123123");
    }
</script>
</body>

</html>
